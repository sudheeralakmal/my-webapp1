{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lakmal/Downloads/my-webapp1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lakmal/Downloads/my-webapp1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lakmal/Downloads/my-webapp1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import logo from\"./logo.svg\";import\"./App.css\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var file,url,params,resp,presignResp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setLoading(true);_context.prev=2;file=event.target[0].files[0];url=\"http://localhost:3001/presign\";params=new URLSearchParams({key:file.name});_context.next=8;return fetch(url,{method:\"POST\",body:params});case 8:resp=_context.sent;_context.next=11;return resp.json();case 11:presignResp=_context.sent;console.log(\"presign resp\",presignResp);_context.next=15;return fetch(presignResp.url,{method:\"PUT\",headers:{\"Content-Type\":file.type},body:file});case 15:resp=_context.sent;console.log(\"resp\",resp);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 22:_context.prev=22;setLoading(false);return _context.finish(22);case 25:case\"end\":return _context.stop();}}},_callee,null,[[2,19,22,25]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,children:\"Upload!\"})]})})});}export default App;","map":{"version":3,"names":["logo","useState","App","loading","setLoading","onSubmit","event","preventDefault","file","target","files","url","params","URLSearchParams","key","name","fetch","method","body","resp","json","presignResp","console","log","headers","type","error"],"sources":["/Users/lakmal/Downloads/my-webapp1/src/App.js"],"sourcesContent":["import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { useState } from \"react\";\n\nfunction App() {\n  const [loading, setLoading] = useState(null);\n  const onSubmit = async (event) => {\n    event.preventDefault();\n\n    setLoading(true);\n    try {\n      let file = event.target[0].files[0];\n      const url = `http://localhost:3001/presign`;\n      const params = new URLSearchParams({\n        key: file.name,\n      });\n      let resp = await fetch(url, {\n        method: \"POST\",\n        body: params,\n      });\n      let presignResp = await resp.json();\n\n      console.log(\"presign resp\", presignResp);\n\n      resp = await fetch(presignResp.url, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": file.type,\n        },\n        body: file,\n      });\n      console.log(\"resp\", resp);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <form onSubmit={onSubmit}>\n          <input type=\"file\" />\n          <br />\n          <button disabled={loading}>Upload!</button>\n        </form>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"wXAAA,MAAOA,KAAP,KAAiB,YAAjB,CACA,MAAO,WAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,C,wFAEA,QAASC,IAAT,EAAe,CACb,cAA8BD,QAAQ,CAAC,IAAD,CAAtC,wCAAOE,OAAP,eAAgBC,UAAhB,eACA,GAAMC,SAAQ,4FAAG,iBAAOC,KAAP,yJACfA,KAAK,CAACC,cAAN,GAEAH,UAAU,CAAC,IAAD,CAAV,CAHe,gBAKTI,IALS,CAKFF,KAAK,CAACG,MAAN,CAAa,CAAb,EAAgBC,KAAhB,CAAsB,CAAtB,CALE,CAMPC,GANO,iCAOPC,MAPO,CAOE,GAAIC,gBAAJ,CAAoB,CACjCC,GAAG,CAAEN,IAAI,CAACO,IADuB,CAApB,CAPF,uBAUIC,MAAK,CAACL,GAAD,CAAM,CAC1BM,MAAM,CAAE,MADkB,CAE1BC,IAAI,CAAEN,MAFoB,CAAN,CAVT,QAUTO,IAVS,sCAcWA,KAAI,CAACC,IAAL,EAdX,SAcTC,WAdS,eAgBbC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BF,WAA5B,EAhBa,uBAkBAL,MAAK,CAACK,WAAW,CAACV,GAAb,CAAkB,CAClCM,MAAM,CAAE,KAD0B,CAElCO,OAAO,CAAE,CACP,eAAgBhB,IAAI,CAACiB,IADd,CAFyB,CAKlCP,IAAI,CAAEV,IAL4B,CAAlB,CAlBL,SAkBbW,IAlBa,eAyBbG,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBJ,IAApB,EAzBa,iFA2BbG,OAAO,CAACI,KAAR,cA3Ba,yBA6BbtB,UAAU,CAAC,KAAD,CAAV,CA7Ba,sGAAH,kBAARC,SAAQ,4CAAd,CAgCA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,eAAQ,SAAS,CAAC,YAAlB,uBACE,cAAM,QAAQ,CAAEA,QAAhB,wBACE,cAAO,IAAI,CAAC,MAAZ,EADF,cAEE,aAFF,cAGE,eAAQ,QAAQ,CAAEF,OAAlB,qBAHF,GADF,EADF,EADF,CAWD,CAED,cAAeD,IAAf"},"metadata":{},"sourceType":"module"}